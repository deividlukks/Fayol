(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1049:function(e,t,n){Promise.resolve().then(n.bind(n,9769))},9769:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(1897),a=n(6669),o=n(5240),i=n(3981);function s(){let e=(0,o.useRouter)(),{isAuthenticated:t}=(0,i.t)();return(0,a.useEffect)(()=>{t?e.push("/dashboard"):e.push("/login")},[t,e]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})})}},3981:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(2010),a=n(9926),o=n(2934);let i="http://localhost:3000/api/v1",s=(0,r.Ue)()((0,a.tJ)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(t,n)=>{e({isLoading:!0,error:null});try{if(!(await o.Z.post("".concat(i,"/admin/auth/check-id"),{fayolId:t},{headers:{"Content-Type":"application/json"}})).data.exists)throw Error("Fayol ID n\xe3o encontrado");let{accessToken:r,user:a}=(await o.Z.post("".concat(i,"/admin/auth/verify-password"),{fayolId:t,password:n},{headers:{"Content-Type":"application/json"}})).data;e({user:{id:a.id,name:a.name,email:a.email,role:a.role,fayolId:a.fayolId},token:r,isAuthenticated:!0,isLoading:!1,error:null})}catch(n){var r,a;let t=(null===(a=n.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||n.message||"Erro ao fazer login. Tente novamente.";throw e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:t}),Error(t)}},logout:()=>{e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})},clearError:()=>{e({error:null})}}),{name:"admin-auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))}},function(e){e.O(0,[853,201,401,744],function(){return e(e.s=1049)}),_N_E=e.O()}]);